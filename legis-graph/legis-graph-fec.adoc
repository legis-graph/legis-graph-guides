= Legis-graph + FEC filings

== The Data Model

=== FEC + US Congress

image::{img}/lgfec-dm.png[]

We've now extended the US Congress dataset to include data on campaign contributions from the FEC. We can now answer interesting questions by querying across both datasets.

//The data for this example comes from
//
//This is the basic data model:

//* a `+(:Intermediary)-[:INTERMEDIARY_OF]->(:Entity)+`
//* an `+(:Officer)-[:OFFICER_OF]->(:Entity)+`
//* an `+(:Officer)-[:SHAREHOLDER_OF]->(:Entity)+`
//* an `+(:Officer)-[:REGISTERED_ADDRESS]->(:Address)+`
//* an `+()-[:SIMILAR_NAME_AND_ADDRESS]->()+`


== Examine a single contribution

image::{img}/lgfec-dm.png[]

[source,cypher]
----
// FEC - examine single contribution
MATCH (l:Legislator)-[:FUNDS]-(f:FECCommittee)<-[:MADE_TO]-(c:Contribution)<-[:MADE_CONTRIBUTION]-(cont:Contributor) WITH l, f, c, cont SKIP 4 LIMIT 2
MATCH (cont)-[:LIVES_IN]->(city:City)
MATCH (cont)-[:WORKS_FOR]->(e:Employer)
MATCH (cont)-[:HAS_OCCUPATION]->(o:Occupation)
RETURN *
----

== FEC Contributions for a certain occupation by party

image::{img}/lgfec-dm.png[]

[source,cypher]
----
// FEC - Contributions for a certain occupation by party
MATCH (o:Occupation) WHERE o.name CONTAINS "BINGO"
MATCH (o)-[:HAS_OCCUPATION]-(con:Contributor)-[:MADE_CONTRIBUTION]->(cont:Contribution)-[:MADE_TO]->(com:FECCommittee)-[:FUNDS]->(cand:Legislator)
RETURN sum(cont.amount) AS total, cand.party ORDER BY total DESC
----


== What companies' employees made most contributions?

image::{img}/lgfec-dm.png[]

[source,cypher]
----
// FEC - What companies' employees made most contributions
MATCH (e:Employer)<-[:WORKS_FOR]-(:Contributor)-[:MADE_CONTRIBUTION]-(cont:Contribution)
WITH sum(cont.amount) AS total, e
RETURN e.name, total ORDER BY total DESC LIMIT 100
----

== Renaissance technologies

image::{img}/lgfec-dm.png[]

=== Examine a few contributions from RENAISSANCE TECHNOLOGIES employees
[source,cypher]
----
// FEC - Renaissance Technologies contributions
MATCH (e:Employer)<-[:WORKS_FOR]-(cont:Contributor)-[:MADE_CONTRIBUTION]->(c:Contribution)-[:MADE_TO]->(f:FECCommittee)-[:FUNDS]->(l:Legislator), (o:Occupation)-[:HAS_OCCUPATION]-(cont)
WHERE e.name CONTAINS "RENAISSANCE TECHNOLOGIES"
RETURN * LIMIT 30
----

=== RENAISSANCE TECHNOLOGIES contributions by political party

[source,cypher]
----
// FEC - Renaissance Technologies contributions by party
MATCH (e:Employer)<-[:WORKS_FOR]-(cont:Contributor)-[:MADE_CONTRIBUTION]->(c:Contribution)-[:MADE_TO]->(f:FECCommittee)-[:FUNDS]->(l:Legislator), (o:Occupation)-[:HAS_OCCUPATION]-(cont)
WHERE e.name CONTAINS "RENAISSANCE TECHNOLOGIES"
MATCH (l)-[:IS_MEMBER_OF]->(p:Party)
RETURN sum(c.amount) AS total, p.name ORDER BY total DESC
----

=== RENAISSANCE TECHNOLOGIES contributions by Congressional Committee

[source,cypher]
----
// FEC - Renaissance Technologies contributions by committee
MATCH (e:Employer)<-[:WORKS_FOR]-(cont:Contributor)-[:MADE_CONTRIBUTION]->(c:Contribution)-[:MADE_TO]->(f:FECCommittee)-[:FUNDS]->(l:Legislator), (o:Occupation)-[:HAS_OCCUPATION]-(cont)
WHERE e.name CONTAINS "RENAISSANCE TECHNOLOGIES"
MATCH (l)<-[:SERVES_ON]->(committee:Committee)
RETURN sum(c.amount) AS total, committee.name ORDER BY total DESC LIMIT 25
----

== Contributions for NY legislators

image::{img}/lgfec-dm.png[]

[source,cypher]
----
// legis-graph-FEC - Contributions for NY legislators
MATCH (s:State {code:"NY"})<-[:REPRESENTS]-(l:Legislator)
MATCH (l)<-[:FUNDS]-(:FECCommittee)-[:MADE_TO]-(c:Contribution)
RETURN l.firstName + " " + l.lastName AS legislator,
   sum(c.amount) AS total ORDER BY total DESC;
----

== Contributions for NY legislators by employer

image::{img}/lgfec-dm.png[]

[source,cypher]
----
// legis-graph-FEC - Contributions for NY legislators by Employer
MATCH (s:State {code:"NY"})<-[:REPRESENTS]-(l:Legislator)
MATCH (l)<-[:FUNDS]-(:FECCommittee)-[:MADE_TO]-(c:Contribution)
MATCH (c)<-[:MADE_CONTRIBUTION]-(cont:Contributor)-[:WORKS_FOR]-(e:Employer)
RETURN sum(c.amount) AS total, e.name ORDER BY total DESC
----

== Contributions for NY legislators by occupation

image::{img}/lgfec-dm.png[]

[source,cypher]
----
// legis-graph-FEC - Contributions for NY legislators by Occupation
MATCH (s:State {code:"NY"})<-[:REPRESENTS]-(l:Legislator)
MATCH (l)<-[:FUNDS]-(:FECCommittee)-[:MADE_TO]-(c:Contribution)
MATCH (c)<-[:MADE_CONTRIBUTION]-(cont:Contributor)-[:HAS_OCCUPATION]->(o:Occupation)
RETURN sum(c.amount) AS total, o.name ORDER BY total DESC
----
