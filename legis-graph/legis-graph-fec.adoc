= Legis-graph + FEC filings

== The Data Model

image::https://raw.githubusercontent.com/legis-graph/legis-graph/master/img/datamodel.png[float=right]

//The data for this example comes from
//
//This is the basic data model:

//* a `+(:Intermediary)-[:INTERMEDIARY_OF]->(:Entity)+`
//* an `+(:Officer)-[:OFFICER_OF]->(:Entity)+`
//* an `+(:Officer)-[:SHAREHOLDER_OF]->(:Entity)+`
//* an `+(:Officer)-[:REGISTERED_ADDRESS]->(:Address)+`
//* an `+()-[:SIMILAR_NAME_AND_ADDRESS]->()+`


== Examine a single contribution
[source,cypher]
----
// FEC - examine single contribution
MATCH (l:Legislator)-[:FUNDS]-(f:FECCommittee)<-[:MADE_TO]-(c:Contribution)<-[:MADE_CONTRIBUTION]-(cont:Contributor) WITH l, f, c, cont SKIP 4 LIMIT 2
MATCH (cont)-[:LIVES_IN]->(city:City)
MATCH (cont)-[:WORKS_FOR]->(e:Employer)
MATCH (cont)-[:HAS_OCCUPATION]->(o:Occupation)
RETURN *
----

== FEC Contributions for a certain occupation by party
[source,cypher]
----
// FEC - Contributions for a certain occupation by party
MATCH (o:Occupation) WHERE o.name CONTAINS "BINGO"
MATCH (o)-[:HAS_OCCUPATION]-(con:Contributor)-[:MADE_CONTRIBUTION]->(cont:Contribution)-[:MADE_TO]->(com:FECCommittee)-[:FUNDS]->(cand:Legislator)
RETURN sum(cont.amount) AS total, cand.party ORDER BY total DESC
// cand.firstName + " " + cand.lastName AS name
----


== What companies' employees made most contributions?
[source,cypher]
----
// FEC - What companies' employees made most contributions
MATCH (e:Employer)<-[:WORKS_FOR]-(:Contributor)-[:MADE_CONTRIBUTION]-(cont:Contribution)
WITH sum(cont.amount) AS total, e
RETURN e, total ORDER BY total DESC LIMIT 100
----

== Renaissance technologies
[source,cypher]
----
// FEC - Renaissance Technologies contributions
MATCH (e:Employer {name: "RENAISSANCE TECHNOLOGIES"})<-[:WORKS_FOR]-(cont:Contributor)-[:MADE_CONTRIBUTION]->(c:Contribution)-[:MADE_TO]->(f:FECCommittee)-[:FUNDS]->(l:Legislator), (o:Occupation)-[:HAS_OCCUPATION]-(cont)
RETURN * LIMIT 30
----

== Contributions for LA legislators
[source,cypher]
----
// legis-graph-FEC - Contributions for LA legislators
MATCH (s:State {code:"LA"})<-[:REPRESENTS]-(l:Legislator)
MATCH (l)<-[:FUNDS]-(:FECCommittee)-[:MADE_TO]-(c:Contribution)
RETURN l.firstName + " " + l.lastName AS legislator,
   sum(c.amount) AS total ORDER BY total DESC;
----

== Contributions for LA legislators by employer
[source,cypher]
----
// legis-graph-FEC - Contributions for LA legislators by Employer
MATCH (s:State {code:"LA"})<-[:REPRESENTS]-(l:Legislator)
MATCH (l)<-[:FUNDS]-(:FECCommittee)-[:MADE_TO]-(c:Contribution)
MATCH (c)<-[:MADE_CONTRIBUTION]-(cont:Contributor)-[:WORKS_FOR]-(e:Employer)
RETURN sum(c.amount) AS total, e ORDER BY total DESC
----

== Contributions for LA legislators by occupation
[source,cypher]
----
// legis-graph-FEC - Contributions for LA legislators by Occupation
MATCH (s:State {code:"LA"})<-[:REPRESENTS]-(l:Legislator)
MATCH (l)<-[:FUNDS]-(:FECCommittee)-[:MADE_TO]-(c:Contribution)
MATCH (c)<-[:MADE_CONTRIBUTION]-(cont:Contributor)-[:HAS_OCCUPATION]->(o:Occupation)
RETURN sum(c.amount) AS total, o ORDER BY total DESC
----
